{% extends 'base.html' %}

{% block content %}

<body>

<div class="container">
  <div class="page-header">
    <h1>Submit Request</h1>
    <h5>Your request will be submitted to the project <a href="https://github.com/nathanbollig/rt-quic-db/issues">issue tracker</a>.</h5>
    <h5>* Required Fields</h5>
  </div>
  <form method="post" action="/sendIssuetoGH">
		<div class="form-row">
			
			<div class="form-group col-md-6 col-sm-6">
				<div class="form-group">
			  	<label for="type">Type of request*</label>
			  	<select class="form-control" id="type" name="type" placeholder="enhancement" value required>
			  		<option value="enhancement">Enhancement request</option>
			  		<option value="bug">Error report</option>
			  		<option value="documentation">Request for documentation</option>
			  		<option value="question">Other question</option>
			  	</select>
			  </div>
				<div class="form-group">
				  	<label for="priority">Priority*</label>
				  	<select class="form-control" id="priority" name="priority" placeholder="LOW" value required>
				  		<option value="LOW">Low</option>
				  		<option value="MEDIUM">Medium</option>
				  		<option value="HIGH">High</option>
				  	</select>
				</div>
				<div class="form-group">
					<label for="loc_ID">Location*</label>
				  <select class="form-control" id="loc_ID" name="loc_ID" placeholder="" required><option value="empty" disabled hidden> -- select an option -- </option></select>
				</div>
			</div>
			<div class="form-group col-md-6 col-sm-6">
			  <div class="form-group">
			    <label for="name">Name*</label>
			    <input type="text" class="form-control" id="role" name="name" placeholder="" value={% if name %} {{ name }}{% else %} {{Guest}} {% endif %} required>
			  </div>
			  <div class="form-group">
			  	<label for="email">Email address</label>
			    <input type="text" class="form-control" id="email" name="email" placeholder="">
			  </div>
			</div>
		
		</div>
		
		<div class="form-group col-md-12 col-sm-12">
		
			<div class="form-group">
		    <label for="subject">Subject*</label>
		    <input type="text" class="form-control" id="subject" name="subject" placeholder="Enter a short summary of your request" required>
		  </div>
		  <div class="form-group">
		  	<label for="description">Description*</label>
		    <textarea class="form-control" id="description" name="description" rows="3" placeholder="Please enter as much information as necessary to describe your request." required></textarea>
		  </div>
		
		</div>
		
		<div class="form-group col-md-12 col-sm-12">
			<div class="form-group">
				<button class="btn btn-primary" type="submit" id="submitButton">Submit</button>
				<button class="btn btn-link" type ="button" id="cancel" onclick="location.href='/enhancementRequest'">Clear form</button>
			</div>
			
				{% with messages = get_flashed_messages() %}
			  {% if messages %}
			    <ul class=flashes>
			    {% for message in messages %}
			      <li>{{ message }}</li>
			    {% endfor %}
			    </ul>
			  {% endif %}
				{% endwith %}
		</div>
			
	</form>
	
	</div>
	
	<script>
		// Declare selector
		var loc_selector = document.getElementById('loc_ID');

	
		// Populate selector with available records
		var locations = {{ locations | tojson | safe}};
	
		var loc_ID = '{{loc_ID}}';
		
		for(index in locations) {
		    loc_selector.options[loc_selector.options.length] = new Option(locations[index], index);
		}
		
		if (loc_ID !== '') {
			loc_selector.value = loc_ID;
		} else {
			loc_selector.value = "empty";
		};
		
	</script>


</body>
{% endblock %}